# 代码提交规范

## 1. 【强制】【重要】确保提交的代码可以正常编译通过与启动

将无法编译通过或无法正常启动的代码提交到测试分支，会影响测试和其他开发的正常工作。  
出现该情况会被严重警告。有多次出现该情况表示工作态度问题，你可能不适合我们的团队。  

## 2. 【强制】确保你项目的根目录下有.gitignore文件，不要提交IDE相关文件。

禁止把IDE相关的文件提交到git。  
对于Java项目，除了src和pom.xml之外的文件都不需要提交。  
对于前端项目，不要提交node_modules和dist目录。  
具体的.gitignore文件参见：

- [前端项目gitignore](gitignore/web/.gitignore)
- [Java项目gitignore](gitignore/java/.gitignore)

## 3. 【强制】每次提交都需要带上有意义的提交说明（Commit Message）

**说明**  
提交说明使用中文。  
所有的代码提交都带上当次发布计划编号+用户故事编号/缺陷编号。  
添加用户故事编号或缺陷编号，可以帮助测试判断需要抽取哪些代码上线，也有利于回顾以前某次改动是为什么提交的。  

**正例**  
```
pabem-bi1.0.1
story123
增加了XXX接口
修复了YYY逻辑
```

**反例**  
只写一句`需求改动`

**小技巧**  
可以在Chrome上安装TabCopy插件（需翻墙），使用alt+c快捷键就可以复制网页标题。  

### 4. 【强制】每天至少提交1次代码
提交代码有两个注意点：
- 少量
- 多次
每天至少提交一次代码。建议在每完成一个用户故事/缺陷/功能后commit一次。  

### 5. 【强制】【Java】对于Java应用，每次提交前用Java编码规范扫描，修复完不符合编码规范的内容才能提交
操作方式为右键项目目录->点击“编码规约扫描”

### 6. 【强制】【Java】对于Java应用，每次提交前确保自己负责的模块的单元测试覆盖率超过70%

### 7. 【强制】【前端】对于TypeScript项目，每次提交前确保没有lint报错
在每次提交代码之前运行命令`npm run lint` 以及 `npm run dev`  
代码编辑器都会有脚本运行支持。vscode，左上角-首选项-设置，扩展/Extensions-npm，选上Enable Script Explorer。会出现npm脚本的模块，对你要运行的脚本右键可以运行。  